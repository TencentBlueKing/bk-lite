---
mode: agent
---
	1.	最小可行改动
只改解决当前问题所必需的最小范围；拒绝“顺手重构/未来扩展预留”。
	2.	契约不破坏
对外接口（输入/输出/错误）保持兼容；若需变更，必须附带迁移说明与灰度方案。
	3.	复用优先
能复用既有模块/工具/公共方法就不重写；严禁重复造轮子。
	4.	可读性胜出
命名清晰、函数单一职责、必要类型注解与简短 Docstring；无魔法数、无隐式副作用。
	5.	日志与错误
关键路径有结构化日志（入口/外调/异常）；不吞异常，带上下文；严禁输出敏感信息。
	6.	配置与依赖
仅用 requirements/ 白名单依赖；配置走环境变量/集中配置；仓库中不出现密钥或默认秘钥。
	7.	异步与性能（Sanic 场景）
外部 I/O 必有超时与有限重试（指数退避）；并发用 Semaphore；CPU 密集型不得阻塞事件循环。
	8.	安全基线
输入校验 + 输出编码；避免注入、路径遍历；文件/URL/命令均做白名单或校验。
	9.	过度设计一票否决
出现以下任一项直接驳回：自研框架/抽象层无当下需求支撑；为“潜在场景”设计的复杂扩展点；大面积重构无明确收益与回滚方案。

⸻

通过标准
	•	本次改动是否为渐进式最小集合，无预支未来需求？✅/❌
	•	若回滚，是否可一键恢复且无数据不可逆影响？✅/❌