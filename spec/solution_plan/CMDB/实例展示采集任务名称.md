# 实例展示采集任务名称

日期：2026-02-27

## 目标

在实例列表与实例详情页，将 `collect_task` 从任务 ID 映射为 `{任务名称}({id})` 进行展示，降低理解成本。

## 范围

- 实例列表
- 实例详情

## 方案概述

新增一个轻量查询接口，返回全量采集任务 `id` 与 `name`，前端在浏览器缓存中保存 1 小时。列表与详情渲染时，以 `collect_task` 的 ID 去映射任务名称，按统一格式展示。

## 接口设计

- 新增轻量接口（全量一次返回）
- 返回字段：`id`、`name`
- 不经过权限过滤（用于展示名称的全量映射）

示例返回（JSON）：

```json
[
  {
    "id": 1001,
    "name": "K8S-Node-Discover"
  }
]
```

## 前端缓存策略

- 缓存位置：浏览器缓存
- TTL：1 小时
- 仅在缓存过期时重新请求

## 展示规则

- `collect_task` 为空：按空值展示规则处理（如空/占位符）。
- `collect_task` 有值且匹配到任务名称：展示 `{任务名称}({id})`。
- `collect_task` 有值但未找到任务：展示 `未找到任务({id})`。

## 影响点

- 实例列表字段渲染逻辑
- 实例详情字段渲染逻辑
- 前端任务名称映射与缓存模块

## 验收对齐

- 列表与详情页 `collect_task` 均按 `{任务名称}({id})` 展示。
- 任务不存在时显示 `未找到任务({id})`。
- 空值不展示错误信息，不影响其他字段显示。

