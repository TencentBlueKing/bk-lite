<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>作业记录 - Job</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Fira Sans', 'Fira Sans', -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei', sans-serif; background: #f5f7fa; color: #1f2329; line-height: 1.5; }
        .top-header { background: #fff; height: 60px; border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px rgba(0,0,0,0.04); display: flex; align-items: center; justify-content: space-between; padding: 0 32px; position: sticky; top: 0; z-index: 100; }
        .header-left { display: flex; align-items: center; gap: 8px; }
        .logo { display: flex; align-items: center; gap: 12px; font-weight: 600; font-size: 18px; }
        .logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, #0052d9 0%, #3a84ff 50%, #699eff 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; font-weight: bold; box-shadow: 0 4px 12px rgba(58, 132, 255, 0.25); }
        .header-nav { display: flex; gap: 8px; margin-left: 48px; }
        .nav-item { display: flex; align-items: center; gap: 8px; color: #646a73; cursor: pointer; font-size: 14px; padding: 8px 16px; border-radius: 8px; transition: all 0.3s; font-weight: 500; }
        .nav-item:hover { color: #0052d9; background: rgba(0, 82, 217, 0.06); }
        .nav-item.active { color: #0052d9; background: rgba(0, 82, 217, 0.1); }
        .header-right { display: flex; align-items: center; gap: 20px; color: #646a73; font-size: 14px; }
        .header-right > span { cursor: pointer; padding: 6px 12px; border-radius: 6px; transition: all 0.3s; }
        .header-right > span:hover { background: rgba(0, 0, 0, 0.04); color: #0052d9; }
        .sub-header { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); height: 52px; border-bottom: 1px solid rgba(0, 0, 0, 0.06); display: flex; align-items: center; padding: 0 32px; }
        .sub-nav { display: flex; gap: 4px; }
        .sub-nav-item { padding: 10px 20px; cursor: pointer; font-size: 14px; color: #646a73; border-radius: 8px; transition: all 0.3s; font-weight: 500; }
        .sub-nav-item:hover { color: #0052d9; background: rgba(0, 82, 217, 0.06); }
        .sub-nav-item.active { color: #0052d9; background: rgba(0, 82, 217, 0.12); }
        .main-container { padding: 24px 32px; max-width: 1600px; margin: 0 auto; }
        
        /* 页面介绍区 */
        .page-intro { background: white; border-radius: 12px; padding: 20px 24px; margin-bottom: 20px; border: 1px solid #e5e7eb; }
        .intro-title { font-size: 16px; font-weight: 600; color: #1f2329; margin-bottom: 8px; }
        .intro-desc { font-size: 14px; color: #646a73; line-height: 1.6; margin: 0; }
        
        /* 筛选栏 */
        .filter-bar { 
            background: white; 
            border-radius: 12px; 
            padding: 16px 20px; 
            margin-bottom: 16px; 
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        /* 组合搜索组件 - 整合筛选 */
        .search-group {
            display: flex;
            border: 1px solid #dcdee0;
            border-radius: 6px;
            overflow: hidden;
            background: white;
            transition: all 0.3s;
            flex: 1;
            max-width: 720px;
        }
        .search-group:hover { border-color: rgba(0, 82, 217, 0.3); }
        .search-group:focus-within { border-color: #0052d9; box-shadow: 0 0 0 3px rgba(0, 82, 217, 0.1); }
        .search-select {
            padding: 8px 12px;
            border: none;
            border-right: 1px solid #dcdee0;
            font-size: 14px;
            outline: none;
            background: #f5f7fa;
            cursor: pointer;
            min-width: 90px;
            color: #1f2329;
        }
        .search-select:hover { background: #eef0f3; }
        .search-input-field {
            padding: 8px 12px;
            border: none;
            font-size: 14px;
            outline: none;
            flex: 1;
            min-width: 200px;
            background: white;
        }
        .search-input-field::placeholder { color: #8f959e; }
        .search-btn {
            padding: 8px 16px;
            background: #0052d9;
            color: white;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .search-btn:hover { background: #0041ad; }
        
        /* 时间快捷选择 */
        .time-shortcuts {
            display: flex;
            gap: 4px;
            background: #f5f7fa;
            padding: 4px;
            border-radius: 6px;
        }
        .time-shortcut {
            padding: 6px 12px;
            font-size: 13px;
            color: #646a73;
            background: transparent;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .time-shortcut:hover { color: #1f2329; background: rgba(255,255,255,0.5); }
        .time-shortcut.active { background: #fff; color: #0052d9; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        
        /* 已激活筛选标签 */
        .active-filters {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 0;
            flex-wrap: wrap;
        }
        .active-filters:empty { display: none; }
        .filter-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #e6f0ff;
            color: #0052d9;
            border-radius: 4px;
            font-size: 13px;
        }
        .filter-tag-remove {
            cursor: pointer;
            font-size: 14px;
            line-height: 1;
            opacity: 0.7;
        }
        .filter-tag-remove:hover { opacity: 1; }
        .clear-filters {
            color: #646a73;
            font-size: 13px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .clear-filters:hover { color: #0052d9; background: rgba(0, 82, 217, 0.06); }
        
        .btn { padding: 8px 20px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.3s; border: none; }
        .btn-primary { background: #0052d9; color: white; }
        .btn-primary:hover { background: #0041ad; }
        .content-card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06); }
        table { width: 100%; border-collapse: collapse; }
        thead { background: #f5f7fa; }
        th { padding: 12px 16px; text-align: left; font-size: 13px; font-weight: 600; color: #646a73; }
        tbody tr { border-bottom: 1px solid #f0f1f5; transition: all 0.2s; }
        tbody tr:hover { background: #f9fafb; }
        td { padding: 16px; font-size: 14px; color: #1f2329; }
        .status-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .status-badge.success { background: #e6fff2; color: #00a870; }
        .status-badge.running { background: #e6f0ff; color: #0052d9; }
        .status-badge.failed { background: #ffe6e6; color: #ea3636; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; }
        .action-link { color: #0052d9; cursor: pointer; transition: all 0.2s; text-decoration: none; }
        .action-link:hover { color: #0041ad; }
        .job-type-badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; background: #f5f7fa; color: #646a73; }
        .source-badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .source-badge.manual { background: #e6f0ff; color: #0052d9; }
        .source-badge.scheduled { background: #fff4e6; color: #d46b08; }
        .source-badge.api { background: #f0f1f5; color: #646a73; }
        .pagination { display: flex; align-items: center; justify-content: space-between; margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f1f5; }
        .pagination-info { font-size: 14px; color: #8f959e; }
        .pagination-btns { display: flex; gap: 8px; }
        .page-btn { padding: 6px 12px; border: 1px solid #dcdee0; border-radius: 4px; background: white; color: #646a73; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .page-btn:hover { border-color: #0052d9; color: #0052d9; }
        .page-btn.active { background: #0052d9; color: white; border-color: #0052d9; }
    
        /* ===== UI/UX ENHANCEMENTS ===== */
        
        /* Focus states for accessibility */
        a:focus-visible, button:focus-visible, input:focus-visible, 
        select:focus-visible, textarea:focus-visible, 
        [tabindex]:focus-visible, .nav-item:focus-visible,
        .sub-nav-item:focus-visible {
            outline: 2px solid #0052d9;
            outline-offset: 2px;
        }

        /* Enhanced table row hover */
        tbody tr {
            border-left: 3px solid transparent;
        }
        tbody tr:hover {
            background: #f0f5ff !important;
            border-left: 3px solid #0052d9;
        }

        /* Inline SVG icon alignment */
        .nav-item svg, .sub-nav-item svg, .header-right svg {
            vertical-align: middle;
            flex-shrink: 0;
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }

    
        /* Table responsive wrapper */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .table-responsive table {
            min-width: 100%;
        }

    </style>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&family=Fira+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="top-header">
        <div class="header-left">
            <div class="logo"><div class="logo-icon">BK</div><span>Job</span></div>
            <nav class="header-nav">
                <div class="nav-item" onclick="location.href='首页.html'"><span style="display:inline-flex;align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span><span>首页</span></div>
                <div class="nav-item active" onclick="location.href='快速执行.html'"><span style="display:inline-flex;align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg></span><span>作业执行</span></div>
                <div class="nav-item" onclick="location.href='脚本库.html'"><span style="display:inline-flex;align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg></span><span>作业模版</span></div>
                <div class="nav-item" onclick="location.href='目标管理.html'"><span style="display:inline-flex;align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></span><span>目标管理</span></div>
                <div class="nav-item" onclick="location.href='高危命令配置.html'"><span style="display:inline-flex;align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span><span>系统配置</span></div>
            </nav>
        </div>
        <div class="header-right">
            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg> 帮助文档</span>
            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg> 语言: 简体中文</span>
            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> Admin</span>
        </div>
    </div>

    <div class="sub-header">
        <nav class="sub-nav">
            <div class="sub-nav-item" onclick="location.href='快速执行.html'">快速执行</div>
            <div class="sub-nav-item" onclick="location.href='文件分发.html'">文件分发</div>
            <div class="sub-nav-item" onclick="location.href='定时任务.html'">定时任务</div>
            <div class="sub-nav-item active">作业记录</div>
        </nav>
    </div>

    <div class="main-container">
        <div class="page-intro">
            <h2 class="intro-title">作业记录</h2>
            <p class="intro-desc">查看所有作业的执行历史记录，包括手动执行、定时任务和 API 调用触发的作业。支持按状态、类型、时间等条件筛选。</p>
        </div>

        <div class="filter-bar">
            <div class="search-group">
                <select class="search-select" id="searchType">
                    <option value="name">作业名称</option>
                    <option value="id">作业ID</option>
                    <option value="user">发起人</option>
                    <option value="status">状态</option>
                    <option value="type">类型</option>
                    <option value="source">来源</option>
                </select>
                <input type="text" class="search-input-field" id="searchInput" placeholder="输入关键词搜索..." />
                <button class="search-btn">搜索</button>
            </div>
            
            <div class="time-shortcuts">
                <button class="time-shortcut active" data-range="today">今天</button>
                <button class="time-shortcut" data-range="7days">近7天</button>
                <button class="time-shortcut" data-range="30days">近30天</button>
                <button class="time-shortcut" data-range="custom">自定义</button>
            </div>
        </div>
        
        <!-- 已激活筛选标签 -->
        <div class="active-filters" id="activeFilters">
            <!-- 动态生成的筛选标签 -->
        </div>

        <div class="content-card">
            <table>
                <thead>
                    <tr>
                        <th>作业ID</th>
                        <th>作业名称</th>
                        <th>作业类型</th>
                        <th>触发来源</th>
                        <th>状态</th>
                        <th>发起人</th>
                        <th>开始时间</th>
                        <th>耗时</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#10025</td>
                        <td>清理磁盘空间</td>
                        <td><span class="job-type-badge">脚本执行</span></td>
                        <td><span class="source-badge manual">手动执行</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>Admin</td>
                        <td>2026-01-20 14:23:15</td>
                        <td>53s</td>
                        <td><a href="作业详情.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10024</td>
                        <td>部署配置文件</td>
                        <td><span class="job-type-badge">文件分发</span></td>
                        <td><span class="source-badge manual">手动执行</span></td>
                        <td><span class="status-badge running"><span class="status-dot"></span>执行中</span></td>
                        <td>张三</td>
                        <td>2026-01-20 14:18:42</td>
                        <td>-</td>
                        <td><a href="作业详情-文件分发.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10023</td>
                        <td>数据库备份</td>
                        <td><span class="job-type-badge">脚本执行</span></td>
                        <td><span class="source-badge scheduled">定时任务</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>系统</td>
                        <td>2026-01-20 14:00:00</td>
                        <td>5m 32s</td>
                        <td><a href="作业详情.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10022</td>
                        <td>日志清理</td>
                        <td><span class="job-type-badge">脚本执行</span></td>
                        <td><span class="source-badge scheduled">定时任务</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>系统</td>
                        <td>2026-01-20 12:00:00</td>
                        <td>1m 15s</td>
                        <td><a href="作业详情.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10021</td>
                        <td>更新应用配置</td>
                        <td><span class="job-type-badge">文件分发</span></td>
                        <td><span class="source-badge api">API 调用</span></td>
                        <td><span class="status-badge failed"><span class="status-dot"></span>失败</span></td>
                        <td>CI/CD</td>
                        <td>2026-01-20 11:30:25</td>
                        <td>20s</td>
                        <td><a href="作业详情-文件分发.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10020</td>
                        <td>重启服务</td>
                        <td><span class="job-type-badge">脚本执行</span></td>
                        <td><span class="source-badge manual">手动执行</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>Admin</td>
                        <td>2026-01-20 10:15:00</td>
                        <td>42s</td>
                        <td><a href="作业详情.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10019</td>
                        <td>应用部署流水线</td>
                        <td><span class="job-type-badge">Playbook</span></td>
                        <td><span class="source-badge api">API 调用</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>CI/CD</td>
                        <td>2026-01-20 10:00:00</td>
                        <td>3m 45s</td>
                        <td><a href="作业详情-Playbook.html" class="action-link">查看详情</a></td>
                    </tr>
                    <tr>
                        <td>#10018</td>
                        <td>证书更新</td>
                        <td><span class="job-type-badge">文件分发</span></td>
                        <td><span class="source-badge manual">手动执行</span></td>
                        <td><span class="status-badge success"><span class="status-dot"></span>成功</span></td>
                        <td>王五</td>
                        <td>2026-01-20 09:30:00</td>
                        <td>2m 15s</td>
                        <td><a href="作业详情-文件分发.html" class="action-link">查看详情</a></td>
                    </tr>
                </tbody>
            </table>

            <div class="pagination">
                <div class="pagination-info">共 238 条记录，当前第 1/24 页</div>
                <div class="pagination-btns">
                    <button class="page-btn">上一页</button>
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <button class="page-btn">4</button>
                    <button class="page-btn">5</button>
                    <button class="page-btn">...</button>
                    <button class="page-btn">24</button>
                    <button class="page-btn">下一页</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const searchLabels = {
            name: '作业名称', id: '作业ID', user: '发起人',
            status: '状态', type: '类型', source: '来源'
        };

        const activeFiltersContainer = document.getElementById('activeFilters');
        const filterTags = [];

        function addFilter() {
            const type = document.getElementById('searchType').value;
            const value = document.getElementById('searchInput').value.trim();
            if (!value) return;
            
            filterTags.push({ type, value, label: `${searchLabels[type]}: ${value}` });
            document.getElementById('searchInput').value = '';
            renderFilterTags();
        }

        function removeFilter(index) {
            filterTags.splice(index, 1);
            renderFilterTags();
        }

        function renderFilterTags() {
            activeFiltersContainer.innerHTML = '';
            filterTags.forEach((filter, index) => {
                const tag = document.createElement('span');
                tag.className = 'filter-tag';
                tag.innerHTML = `${filter.label}<span class="filter-tag-remove">×</span>`;
                tag.querySelector('.filter-tag-remove').onclick = () => removeFilter(index);
                activeFiltersContainer.appendChild(tag);
            });
            if (filterTags.length > 0) {
                const clearBtn = document.createElement('span');
                clearBtn.className = 'clear-filters';
                clearBtn.textContent = '清除全部';
                clearBtn.onclick = () => { filterTags.length = 0; renderFilterTags(); };
                activeFiltersContainer.appendChild(clearBtn);
            }
        }

        document.querySelector('.search-btn').addEventListener('click', addFilter);
        document.getElementById('searchInput').addEventListener('keypress', e => {
            if (e.key === 'Enter') addFilter();
        });

        document.querySelectorAll('.time-shortcut').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.time-shortcut').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
    </script>
</body>
</html>