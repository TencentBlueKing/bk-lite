# ================================== General ===================================
name: "metricbeat-${node.ip}-${node.cloud_region}"
tags: ["bk-lite", "logstash", "metrics"]
# ================================== Logging ===================================
logging.level: info
logging.to_files: true
logging.files:
  path: /opt/fusion-collectors/log/metricbeat
  name: metricbeat
  keepfiles: 7
  permissions: 0600
# ================================== Outputs ===================================
output.logstash:
  hosts: ["localhost:15044"]
  worker: 1
  bulk_max_size: 2048
  timeout: 30s
  max_retries: 3
# ================================== Processors ===================================
processors:
  - add_host_metadata:
      when.not.contains.tags: forwarded

# ================================== Modules ===================================
metricbeat.modules:
- module: system
  metricsets:
    - uptime
  enabled: true
  period: 600s  # 从300s改为600s，降低到10分钟一次

  fields:
    log_type: "metricbeat"
    health_check_mode: true
    _msg: "health check"
  fields_under_root: true
