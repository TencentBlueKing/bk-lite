{
  "object": "Tomcat",
  "plugin": "Tomcat-JMX",
  "templates": [
    {
      "name": "Tomcat 错误率突增",
      "alert_name": "Tomcat ${metric_instance_id} 错误量异常",
      "description": "检测 Tomcat 每秒错误增长量，突增需立即检查应用日志和依赖服务。",
      "metric_name": "tomcat_errorcount_increase",
      "algorithm": "max",
      "threshold": [
        {
          "level": "critical",
          "value": 20,
          "method": ">="
        },
        {
          "level": "error",
          "value": 10,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 5,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat 平均处理时间增长",
      "alert_name": "Tomcat ${metric_instance_id} 处理延迟升高",
      "description": "监控请求平均处理时间增长，持续增长需优化SQL或缓存策略。",
      "metric_name": "tomcat_processingtime_increase",
      "algorithm": "avg",
      "threshold": [
        {
          "level": "critical",
          "value": 0.1,
          "method": ">="
        },
        {
          "level": "error",
          "value": 0.05,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 0.02,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat 单请求超时",
      "alert_name": "Tomcat ${metric_instance_id} 出现超长请求",
      "description": "检测历史最大请求耗时，超过阈值表明存在严重阻塞操作。",
      "metric_name": "tomcat_maxtime_total_counter",
      "algorithm": "max",
      "threshold": [
        {
          "level": "critical",
          "value": 5,
          "method": ">="
        },
        {
          "level": "error",
          "value": 3,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 1,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat 线程池使用率过高",
      "alert_name": "Tomcat ${metric_instance_id} 线程池过载",
      "description": "监控线程池使用率，持续过高需调整线程池配置或扩容。",
      "metric_name": "tomcat_threadpool_utilization",
      "algorithm": "avg",
      "threshold": [
        {
          "level": "critical",
          "value": 90,
          "method": ">="
        },
        {
          "level": "error",
          "value": 80,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 70,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat 会话处理延迟",
      "alert_name": "Tomcat ${metric_instance_id} 会话处理缓慢",
      "description": "监控会话平均处理时间，过高需检查会话存储性能。",
      "metric_name": "tomcat_session_processingtime_avg",
      "algorithm": "avg",
      "threshold": [
        {
          "level": "critical",
          "value": 500,
          "method": ">="
        },
        {
          "level": "error",
          "value": 300,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 100,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat 会话拒绝率过高",
      "alert_name": "Tomcat ${metric_instance_id} 会话被大量拒绝",
      "description": "检测会话拒绝率，过高需调整会话超时时间或存储配置。",
      "metric_name": "tomcat_session_rejectionrate",
      "algorithm": "max",
      "threshold": [
        {
          "level": "critical",
          "value": 10,
          "method": ">="
        },
        {
          "level": "error",
          "value": 5,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 2,
          "method": ">="
        }
      ]
    },
    {
      "name": "Tomcat JMX 采集失败",
      "alert_name": "Tomcat ${metric_instance_id} 监控数据异常",
      "description": "监控 JMX 数据采集状态，失败需检查网络或权限配置。",
      "metric_name": "jmx_scrape_error_gauge",
      "algorithm": "last_over_time",
      "threshold": [
        {
          "level": "critical",
          "value": 0,
          "method": "!="
        }
      ]
    }
  ]
}