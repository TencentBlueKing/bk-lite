{
  "plugin": "MongoDB",
  "plugin_desc": "By collecting metrics on MongoDB read and write activities, command execution, connection counts, latency, memory usage, and network traffic, this helps optimize performance and ensure efficient and stable database operations.",
  "status_query": "any({instance_type='mongodb', collect_type='database'}) by (instance_id)",
  "name": "MongoDB",
  "icon": "mongodb",
  "type": "Database",
  "description": "",
  "default_metric": "any({instance_type='mongodb'}) by (instance_id)",
  "instance_id_keys": ["instance_id"],
  "supplementary_indicators": ["mongodb_connections_current", "mongodb_page_faults_rate", "mongodb_latency_commands_avg"],
  "metrics": [
    {
      "metric_group": "Base",
      "name": "mongodb_uptime_ns",
      "display_name": "Uptime",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "ns",
      "dimensions": [],
      "description": "Duration the MongoDB instance has been continuously running, indicating service stability",
      "query": "mongodb_uptime_ns{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_connections_current",
      "display_name": "Current Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of active client connections, indicating database concurrent access load",
      "query": "mongodb_connections_current{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_connections_available",
      "display_name": "Available Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of available connection slots, indicating connection pool resource capacity",
      "query": "mongodb_connections_available{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_open_connections",
      "display_name": "Open Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of currently open connections, including active and idle connections",
      "query": "mongodb_open_connections{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_active_reads",
      "display_name": "Active Read Operations",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of read operations currently executing, indicating real-time read load",
      "query": "mongodb_active_reads{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_active_writes",
      "display_name": "Active Write Operations",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of write operations currently executing, indicating real-time write load",
      "query": "mongodb_active_writes{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_queued_reads",
      "display_name": "Queued Read Operations",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of read operations waiting to execute, indicating read queue backlog",
      "query": "mongodb_queued_reads{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_queued_writes",
      "display_name": "Queued Write Operations",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of write operations waiting to execute, indicating write queue backlog",
      "query": "mongodb_queued_writes{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_page_faults_rate",
      "display_name": "Page Faults Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of page faults occurrence, indicating memory pressure and working set size appropriateness",
      "query": "rate(mongodb_page_faults{__$labels__}[5m])"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_latency_commands_avg",
      "display_name": "Average Command Latency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "ns",
      "dimensions": [],
      "description": "Average latency time for command operations, indicating database response performance",
      "query": "mongodb_latency_commands{__$labels__}/mongodb_latency_commands_count{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "mongodb_latency_reads_avg",
      "display_name": "Average Read Latency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "ns",
      "dimensions": [],
      "description": "Average latency time for read operations, indicating database read performance",
      "query": "mongodb_latency_reads{__$labels__}/mongodb_latency_reads_count{__$labels__}"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_commands_rate",
      "display_name": "Command Operations Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of command type operations execution, indicating overall database processing load",
      "query": "rate(mongodb_commands{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_queries_rate",
      "display_name": "Query Operations Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of query type operations execution, indicating database query processing load",
      "query": "rate(mongodb_queries{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_inserts_rate",
      "display_name": "Insert Operations Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of insert type operations execution, indicating data write load",
      "query": "rate(mongodb_inserts{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_updates_rate",
      "display_name": "Update Operations Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of update type operations execution, indicating data update load",
      "query": "rate(mongodb_updates{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_deletes_rate",
      "display_name": "Delete Operations Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of delete type operations execution, indicating data delete load",
      "query": "rate(mongodb_deletes{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_document_inserted_rate",
      "display_name": "Document Inserted Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of document insertion operations, indicating data growth rate",
      "query": "rate(mongodb_document_inserted{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_document_updated_rate",
      "display_name": "Document Updated Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of document update operations, indicating data modification activity level",
      "query": "rate(mongodb_document_updated{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_document_deleted_rate",
      "display_name": "Document Deleted Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Frequency of document deletion operations, indicating data cleanup activity level",
      "query": "rate(mongodb_document_deleted{__$labels__}[5m])"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_assert_user",
      "display_name": "User Assertions",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Cumulative number of user assertions triggered, indicating application logic or data anomalies",
      "query": "mongodb_assert_user{__$labels__}"
    },
    {
      "metric_group": "Operations",
      "name": "mongodb_cursor_timed_out_count",
      "display_name": "Timed Out Cursors",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Cumulative number of cursors that have timed out, indicating long query execution time or resource management issues",
      "query": "mongodb_cursor_timed_out_count{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_resident_megabytes",
      "display_name": "Resident Memory Size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "mebibytes",
      "dimensions": [],
      "description": "Physical memory size used by MongoDB process, indicating memory resource usage",
      "query": "mongodb_resident_megabytes{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_vsize_megabytes",
      "display_name": "Virtual Memory Size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "mebibytes",
      "dimensions": [],
      "description": "Virtual memory size used by MongoDB process, indicating memory resource allocation",
      "query": "mongodb_vsize_megabytes{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_tcmalloc_current_allocated_bytes",
      "display_name": "Currently Allocated Memory",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Memory currently allocated via tcmalloc memory allocator, indicating memory usage efficiency",
      "query": "mongodb_tcmalloc_current_allocated_bytes{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_wtcache_current_bytes",
      "display_name": "WiredTiger Cache Size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Current usage size of WiredTiger storage engine cache, indicating cache utilization",
      "query": "mongodb_wtcache_current_bytes{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_wtcache_max_bytes_configured",
      "display_name": "WiredTiger Cache Max Configured",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Maximum configured size for WiredTiger storage engine cache, indicating cache capacity limit",
      "query": "mongodb_wtcache_max_bytes_configured{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_wtcache_tracked_dirty_bytes",
      "display_name": "Tracked Dirty Data Size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Size of modified but not yet written to disk data in WiredTiger cache, indicating data persistence delay",
      "query": "mongodb_wtcache_tracked_dirty_bytes{__$labels__}"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_net_in_bytes_count_rate",
      "display_name": "Network Input Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "byteps",
      "dimensions": [],
      "description": "Frequency of network data reception, indicating database input traffic load",
      "query": "rate(mongodb_net_in_bytes_count{__$labels__}[5m])"
    },
    {
      "metric_group": "Resources",
      "name": "mongodb_net_out_bytes_count_rate",
      "display_name": "Network Output Frequency",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "byteps",
      "dimensions": [],
      "description": "Frequency of network data transmission, indicating database output traffic load",
      "query": "rate(mongodb_net_out_bytes_count{__$labels__}[5m])"
    }
  ]
}