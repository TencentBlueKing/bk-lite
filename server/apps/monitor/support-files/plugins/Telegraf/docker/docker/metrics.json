{
  "plugin": "Docker",
  "plugin_desc": "Used for collecting and analyzing the status, resource usage (CPU, memory, network, IO), and performance metrics of Docker containers, helping to identify anomalies and optimize container operational efficiency.",
  "status_query": "any({instance_type='docker', collect_type='docker'}) by (instance_id)",
  "is_compound_object": true,
  "objects": [
    {
      "name": "Docker",
      "icon": "Docker",
      "type": "Container Management",
      "level": "base",
      "description": "",
      "default_metric": "any({instance_type='docker'}) by (instance_id)",
      "instance_id_keys": ["instance_id"],
      "supplementary_indicators": ["docker_n_containers_running", "docker_n_containers", "docker_n_containers_stopped"],
      "metrics": [
        {
          "metric_group": "Docker Count",
          "name": "docker_n_containers_running",
          "display_name": "Running Container Count",
          "instance_id_keys": ["instance_id"],
          "data_type": "Number",
          "unit": "counts",
          "dimensions": [],
          "description": "This metric represents the number of running containers on the Docker host",
          "query": "docker_n_containers_running{__$labels__}"
        },
        {
          "metric_group": "Docker Count",
          "name": "docker_n_containers",
          "display_name": "Total Container Count",
          "instance_id_keys": ["instance_id"],
          "data_type": "Number",
          "unit": "counts",
          "dimensions": [],
          "description": "This metric represents the total number of containers on the Docker host",
          "query": "docker_n_containers{__$labels__}"
        },
        {
          "metric_group": "Docker Count",
          "name": "docker_n_containers_stopped",
          "display_name": "Stopped Container Count",
          "instance_id_keys": ["instance_id"],
          "data_type": "Number",
          "unit": "counts",
          "dimensions": [],
          "description": "This metric represents the number of stopped containers on the Docker host",
          "query": "docker_n_containers_stopped{__$labels__}"
        }
      ]
    },
    {
      "name": "Docker Container",
      "icon": "Docker",
      "type": "Container Management",
      "level": "derivative",
      "description": "",
      "default_metric": "docker_container_mem_usage",
      "instance_id_keys": ["instance_id", "container_name"],
      "supplementary_indicators": ["docker_container_status", "docker_container_cpu_usage_percent", "docker_container_mem_usage_percent"],
      "metrics": [
        {
          "metric_group": "Status",
          "name": "docker_container_status",
          "display_name": "Container Status",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Enum",
          "unit": "[{\"name\":\"正常\",\"id\":0,\"color\":\"#1ac44a\"},{\"name\":\"异常\",\"id\":1,\"color\":\"#ff4d4f\"}]",
          "dimensions": [],
          "description": "Reflects the current running state of the container, such as running, stopped, or paused",
          "query": "docker_container_status_container_id{container_status=\"running\", __$labels__}"
        },
        {
          "metric_group": "Status",
          "name": "docker_container_status_restart_count",
          "display_name": "Restart Count",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "counts",
          "dimensions": [],
          "description": "The number of times the container has restarted, i.e., how many resets have occurred since its last start",
          "query": "docker_container_status_restart_count{__$labels__}"
        },
        {
          "metric_group": "CPU",
          "name": "docker_container_cpu_usage_percent",
          "display_name": "CPU Usage Percent",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "percent",
          "dimensions": [],
          "description": "Percentage of CPU resources used by the container relative to the available resources, used to monitor performance and load",
          "query": "docker_container_cpu_usage_percent{__$labels__}"
        },
        {
          "metric_group": "Memory",
          "name": "docker_container_mem_usage_percent",
          "display_name": "Memory Usage Percent",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "percent",
          "dimensions": [],
          "description": "Percentage of memory used by the container relative to the memory limit set, helps understand memory usage",
          "query": "docker_container_mem_usage_percent{__$labels__}"
        },
        {
          "metric_group": "Memory",
          "name": "docker_container_mem_usage",
          "display_name": "Memory Usage",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "bytes",
          "dimensions": [],
          "description": "Amount of memory used by the container, indicating the actual physical memory consumption",
          "query": "docker_container_mem_usage{__$labels__}"
        },
        {
          "metric_group": "Block I/O",
          "name": "docker_container_blkio_io_service_bytes_recursive_total_rate",
          "display_name": "Total Block I/O Bytes Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "byteps",
          "dimensions": [],
          "description": "Total number of bytes transferred per second during block I/O operations in the container, including all read and write operations",
          "query": "rate(docker_container_blkio_io_service_bytes_recursive_total{__$labels__}[5m])"
        },
        {
          "metric_group": "Block I/O",
          "name": "docker_container_blkio_io_service_bytes_recursive_read_rate",
          "display_name": "Block Device Read Bytes Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "byteps",
          "dimensions": [],
          "description": "Number of bytes read per second from block devices, reflecting the load of read operations and storage performance",
          "query": "rate(docker_container_blkio_io_service_bytes_recursive_read{__$labels__}[5m])"
        },
        {
          "metric_group": "Block I/O",
          "name": "docker_container_blkio_io_service_bytes_recursive_write_rate",
          "display_name": "Block Device Write Bytes Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "byteps",
          "dimensions": [],
          "description": "Number of bytes written per second to block devices, indicating the load of write operations and storage performance",
          "query": "rate(docker_container_blkio_io_service_bytes_recursive_write{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_rx_bytes_rate",
          "display_name": "Received Network Bytes Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "byteps",
          "dimensions": [],
          "description": "Number of bytes received per second by the container through its network interfaces, used to monitor inbound network traffic",
          "query": "rate(docker_container_net_rx_bytes{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_tx_bytes_rate",
          "display_name": "Transmitted Network Bytes Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "byteps",
          "dimensions": [],
          "description": "Number of bytes sent per second from the container through its network interfaces, used to monitor outbound network traffic",
          "query": "rate(docker_container_net_tx_bytes{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_rx_errors_rate",
          "display_name": "Network Receive Errors Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "cps",
          "dimensions": [],
          "description": "Number of errors per second encountered by the container when receiving packets, useful for diagnosing network issues",
          "query": "rate(docker_container_net_rx_errors{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_tx_errors_rate",
          "display_name": "Network Transmit Errors Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "cps",
          "dimensions": [],
          "description": "Number of errors per second encountered by the container when sending packets, useful for identifying outbound network problems",
          "query": "rate(docker_container_net_tx_errors{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_rx_packets_rate",
          "display_name": "Received Packets Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "cps",
          "dimensions": [],
          "description": "Number of packets received per second by the container, indicating the activity level of inbound network flow",
          "query": "rate(docker_container_net_rx_packets{__$labels__}[5m])"
        },
        {
          "metric_group": "Network",
          "name": "docker_container_net_tx_packets_rate",
          "display_name": "Transmitted Packets Rate",
          "instance_id_keys": ["instance_id", "container_name"],
          "data_type": "Number",
          "unit": "cps",
          "dimensions": [],
          "description": "Number of packets sent per second by the container, reflecting the activity level of outbound network flow",
          "query": "rate(docker_container_net_tx_packets{__$labels__}[5m])"
        }
      ]
    }
  ]
}
