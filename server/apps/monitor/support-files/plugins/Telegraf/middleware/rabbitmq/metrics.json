{
  "plugin": "RabbitMQ",
  "plugin_desc": "Used for monitoring RabbitMQ's runtime status, resource usage, message flow, and queue health.",
  "status_query": "any({instance_type='rabbitmq', collect_type='middleware'}) by (instance_id)",
  "name": "RabbitMQ",
  "icon": "rabbitmq",
  "type": "Middleware",
  "description": "",
  "default_metric": "any({instance_type='rabbitmq'}) by (instance_id)",
  "instance_id_keys": ["instance_id"],
  "supplementary_indicators": ["rabbitmq_node_running", "rabbitmq_overview_messages_ready", "rabbitmq_node_mem_alarm"],
  "metrics": [
    {
      "metric_group": "Base",
      "name": "rabbitmq_node_uptime",
      "display_name": "Node Uptime",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "s",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Uptime of RabbitMQ node since startup, reflecting node stability",
      "query": "rabbitmq_node_uptime{__$labels__}"
    },
    {
      "metric_group": "Base",
      "name": "rabbitmq_node_running",
      "display_name": "Node Running Status",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"name\":\"静止\",\"id\":0,\"color\":\"#ff4d4f\"},{\"name\":\"运行中\",\"id\":1,\"color\":\"#1ac44a\"}]",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Whether RabbitMQ node is running, 1 indicates running, 0 indicates stopped",
      "query": "rabbitmq_node_running{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_connections",
      "display_name": "Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of active client connections, reflecting system load",
      "query": "rabbitmq_overview_connections{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_channels",
      "display_name": "Channels",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of open channels, reflecting message flow control capability",
      "query": "rabbitmq_overview_channels{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_consumers",
      "display_name": "Consumers",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of active consumers, reflecting message consumption capacity",
      "query": "rabbitmq_overview_consumers{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_queues",
      "display_name": "Queues",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of defined queues, reflecting message storage structure",
      "query": "rabbitmq_overview_queues{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_messages",
      "display_name": "Total Messages",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total messages in all queues, reflecting message backlog",
      "query": "rabbitmq_overview_messages{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_messages_ready",
      "display_name": "Ready Messages",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of messages ready for delivery in queues, reflecting pending messages",
      "query": "rabbitmq_overview_messages_ready{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_messages_unacked",
      "display_name": "Unacknowledged Messages",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of delivered but unacknowledged messages, reflecting message processing delay",
      "query": "rabbitmq_overview_messages_unacked{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_overview_messages_published_rate",
      "display_name": "Message Publish Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Rate of messages published to RabbitMQ, reflecting message production volume",
      "query": "rate(rabbitmq_overview_messages_published{__$labels__}[5m])"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_node_run_queue",
      "display_name": "Run Queue",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Erlang run queue length, reflecting system CPU load and scheduling delay",
      "query": "rabbitmq_node_run_queue{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "rabbitmq_node_mnesia_disk_tx_count_rate",
      "display_name": "Mnesia Disk Transaction Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Rate of Mnesia database disk transactions, reflecting data persistence activity intensity",
      "query": "rate(rabbitmq_node_mnesia_disk_tx_count{__$labels__}[5m])"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_mem_used",
      "display_name": "Memory Used",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Current memory used by RabbitMQ node, reflecting memory resource consumption",
      "query": "rabbitmq_node_mem_used{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_mem_limit",
      "display_name": "Memory Limit",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Memory limit for RabbitMQ node, used to calculate memory usage rate",
      "query": "rabbitmq_node_mem_limit{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_mem_alarm",
      "display_name": "Memory Alarm",
      "instance_id_keys": ["instance_id"],
      "data_type": "Enum",
      "unit": "[{\"name\":\"正常\",\"id\":0,\"color\":\"#1ac44a\"},{\"name\":\"告警\",\"id\":1,\"color\":\"#ff4d4f\"}]",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Whether memory usage triggers alarm, 1 indicates alarm, 0 indicates normal",
      "query": "rabbitmq_node_mem_alarm{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_disk_free",
      "display_name": "Disk Free Space",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Available free disk space for RabbitMQ node, reflecting storage capacity",
      "query": "rabbitmq_node_disk_free{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_disk_free_alarm",
      "display_name": "Disk Space Alarm",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "none",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Whether disk space usage triggers alarm, 1 indicates alarm, 0 indicates normal",
      "query": "rabbitmq_node_disk_free_alarm{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_fd_used",
      "display_name": "File Descriptors Used",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Number of file descriptors currently used by RabbitMQ node, reflecting system resource usage",
      "query": "rabbitmq_node_fd_used{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_sockets_used",
      "display_name": "Sockets Used",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Number of sockets currently used by RabbitMQ node, reflecting network connection status",
      "query": "rabbitmq_node_sockets_used{__$labels__}"
    },
    {
      "metric_group": "Resource",
      "name": "rabbitmq_node_proc_used",
      "display_name": "Processes Used",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [{"name": "node", "description": "节点"}],
      "description": "Number of Erlang processes currently used by RabbitMQ node, reflecting system process load",
      "query": "rabbitmq_node_proc_used{__$labels__}"
    }
  ]
}