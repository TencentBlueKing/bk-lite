{
  "plugin": "Tomcat",
  "plugin_desc": "Collects key performance metrics of Tomcat connectors and JVM memory to monitor server resource usage, request processing efficiency, and errors, optimizing system performance.",
  "status_query": "any({instance_type='tomcat', collect_type='middleware'}) by (instance_id)",
  "name": "Tomcat",
  "icon": "Tomcat",
  "type": "Middleware",
  "description": "",
  "default_metric": "any({instance_type='tomcat'}) by (instance_id)",
  "instance_id_keys": ["instance_id"],
  "supplementary_indicators": ["tomcat_connector_current_threads_busy", "tomcat_jvm_memorypool_used", "tomcat_connector_error_count_rate"],
  "metrics": [
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_request_count",
      "display_name": "Total Requests Processed",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of HTTP requests processed by connector, reflecting overall workload",
      "query": "tomcat_connector_request_count{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_error_count",
      "display_name": "Total Error Requests",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of error requests during processing, indicating service reliability issues",
      "query": "tomcat_connector_error_count{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_bytes_received",
      "display_name": "Total Bytes Received",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Total bytes received from clients by connector, reflecting network input traffic",
      "query": "tomcat_connector_bytes_received{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_bytes_sent",
      "display_name": "Total Bytes Sent",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Total bytes sent to clients by connector, reflecting network output traffic",
      "query": "tomcat_connector_bytes_sent{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_processing_time",
      "display_name": "Total Processing Time",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "ms",
      "dimensions": [],
      "description": "Total time spent processing all requests by connector, reflecting processing performance",
      "query": "tomcat_connector_processing_time{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_max_time",
      "display_name": "Maximum Request Processing Time",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "ms",
      "dimensions": [],
      "description": "Maximum time taken to process a single request by connector, indicating extreme performance cases",
      "query": "tomcat_connector_max_time{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_current_thread_count",
      "display_name": "Current Thread Count",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of threads currently managed in connector thread pool, indicating resource allocation",
      "query": "tomcat_connector_current_thread_count{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_current_threads_busy",
      "display_name": "Busy Threads Count",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of threads currently busy processing requests, indicating real-time load",
      "query": "tomcat_connector_current_threads_busy{__$labels__}"
    },
    {
      "metric_group": "Connector",
      "name": "tomcat_connector_max_threads",
      "display_name": "Maximum Threads",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Maximum number of threads allowed in connector thread pool, indicating concurrency capacity limit",
      "query": "tomcat_connector_max_threads{__$labels__}"
    },
    {
      "metric_group": "JVM Memory",
      "name": "tomcat_jvm_memory_free",
      "display_name": "Free Memory Size",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Current free space in JVM heap memory, indicating available memory capacity",
      "query": "tomcat_jvm_memory_free{__$labels__}"
    },
    {
      "metric_group": "JVM Memory",
      "name": "tomcat_jvm_memory_total",
      "display_name": "Total Allocated Memory",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Total allocated space in JVM heap memory, indicating memory usage scale",
      "query": "tomcat_jvm_memory_total{__$labels__}"
    },
    {
      "metric_group": "JVM Memory",
      "name": "tomcat_jvm_memory_max",
      "display_name": "Maximum Available Memory",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Maximum available space configured for JVM heap memory, indicating memory capacity limit",
      "query": "tomcat_jvm_memory_max{__$labels__}"
    },
    {
      "metric_group": "Memory Pool",
      "name": "tomcat_jvm_memorypool_used",
      "display_name": "Memory Pool Used",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Current used memory size in specific JVM memory pool, indicating detailed memory allocation",
      "query": "tomcat_jvm_memorypool_used{__$labels__}"
    },
    {
      "metric_group": "Memory Pool",
      "name": "tomcat_jvm_memorypool_committed",
      "display_name": "Memory Pool Committed",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Memory size committed to OS for specific JVM memory pool, indicating memory reservation",
      "query": "tomcat_jvm_memorypool_committed{__$labels__}"
    },
    {
      "metric_group": "Memory Pool",
      "name": "tomcat_jvm_memorypool_max",
      "display_name": "Memory Pool Maximum",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Maximum memory size allowed for specific JVM memory pool, indicating capacity limit",
      "query": "tomcat_jvm_memorypool_max{__$labels__}"
    },
    {
      "metric_group": "Memory Pool",
      "name": "tomcat_jvm_memorypool_init",
      "display_name": "Memory Pool Initial",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "bytes",
      "dimensions": [],
      "description": "Initial memory size allocated for specific JVM memory pool, indicating startup configuration",
      "query": "tomcat_jvm_memorypool_init{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "tomcat_connector_request_count_rate",
      "display_name": "Request Processing Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Request processing rate per second calculated over 5-minute window, indicating real-time throughput",
      "query": "rate(tomcat_connector_request_count{__$labels__}[5m])"
    },
    {
      "metric_group": "Performance",
      "name": "tomcat_connector_error_count_rate",
      "display_name": "Error Request Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Error request rate per second calculated over 5-minute window, indicating service stability trend",
      "query": "rate(tomcat_connector_error_count{__$labels__}[5m])"
    },
    {
      "metric_group": "Performance",
      "name": "tomcat_connector_bytes_sent_rate",
      "display_name": "Data Sending Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "byteps",
      "dimensions": [],
      "description": "Data sending rate per second calculated over 5-minute window, indicating network output traffic trend",
      "query": "rate(tomcat_connector_bytes_sent{__$labels__}[5m])"
    },
    {
      "metric_group": "Performance",
      "name": "tomcat_connector_current_thread_utilization",
      "display_name": "Thread Pool Utilization",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "percent",
      "dimensions": [],
      "description": "Percentage of busy threads relative to maximum threads, indicating thread resource utilization efficiency",
      "query": "tomcat_connector_current_threads_busy{__$labels__} / tomcat_connector_max_threads{__$labels__} * 100"
    }
  ]
}