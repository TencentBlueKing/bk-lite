{
  "plugin": "Apache",
  "plugin_desc": "Real-time collection of Apache runtime data, resource utilization, request processing efficiency, and bandwidth statistics, helping users optimize performance, diagnose issues, and achieve efficient operations management.",
  "status_query": "any({instance_type='apache', collect_type='middleware'}) by (instance_id)",
  "name": "Apache",
  "icon": "apache",
  "type": "Middleware",
  "description": "",
  "default_metric": "any({instance_type='apache'}) by (instance_id)",
  "instance_id_keys": ["instance_id"],
  "supplementary_indicators": ["apache_ReqPerSec", "apache_BusyWorkers", "apache_CPULoad"],
  "metrics": [
    {
      "metric_group": "Base",
      "name": "apache_ServerUptimeSeconds",
      "display_name": "Server Uptime",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "s",
      "dimensions": [],
      "description": "Duration the server has been running since last restart, reflecting service stability and availability",
      "query": "apache_ServerUptimeSeconds{__$labels__}"
    },
    {
      "metric_group": "Base",
      "name": "apache_ParentServerConfigGeneration",
      "display_name": "Parent Server Config Generation",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of times parent server configuration has been reloaded; increments on each reload",
      "query": "apache_ParentServerConfigGeneration{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_TotalAccesses",
      "display_name": "Total Accesses",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of HTTP requests processed, measuring overall server workload and processing capacity",
      "query": "apache_TotalAccesses{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_ReqPerSec",
      "display_name": "Request Processing Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Current rate at which the server processes requests, directly indicating real-time processing performance",
      "query": "apache_ReqPerSec{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_BytesPerSec",
      "display_name": "Data Transfer Rate",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "kibyteps",
      "dimensions": [],
      "description": "Amount of data sent per second, reflecting network bandwidth usage and data throughput capacity",
      "query": "apache_BytesPerSec{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_BusyWorkers",
      "display_name": "Busy Workers",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of worker processes currently handling client requests; high values may indicate server overload",
      "query": "apache_BusyWorkers{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_IdleWorkers",
      "display_name": "Idle Workers",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of worker processes idle and waiting for requests, indicating available processing capacity",
      "query": "apache_IdleWorkers{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_CPULoad",
      "display_name": "CPU Load",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "percent",
      "dimensions": [],
      "description": "Percentage of CPU resources utilized by the process, monitoring CPU usage and identifying resource bottlenecks",
      "query": "apache_CPULoad{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_Load1",
      "display_name": "1-Minute System Load",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "none",
      "dimensions": [],
      "description": "Average system load over the past 1 minute, reflecting short-term system resource pressure",
      "query": "apache_Load1{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_Load5",
      "display_name": "5-Minute System Load",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "none",
      "dimensions": [],
      "description": "Average system load over the past 5 minutes, indicating medium-term system resource pressure trends",
      "query": "apache_Load5{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_Load15",
      "display_name": "15-Minute System Load",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "none",
      "dimensions": [],
      "description": "Average system load over the past 15 minutes, indicating long-term system resource pressure trends",
      "query": "apache_Load15{__$labels__}"
    },
    {
      "metric_group": "Performance",
      "name": "apache_TotalAccesses_rate",
      "display_name": "Request Rate Change",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Rate of change in requests per second calculated over a 5-minute window, indicating traffic trends and fluctuations",
      "query": "rate(apache_TotalAccesses{__$labels__}[5m])"
    },
    {
      "metric_group": "State",
      "name": "apache_scboard_open",
      "display_name": "Open Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Total number of connections currently open in the scoreboard, indicating concurrent connections",
      "query": "apache_scboard_open{__$labels__}"
    },
    {
      "metric_group": "State",
      "name": "apache_scboard_waiting",
      "display_name": "Waiting Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of connections waiting for idle worker processes; high values may indicate insufficient server resources",
      "query": "apache_scboard_waiting{__$labels__}"
    },
    {
      "metric_group": "State",
      "name": "apache_scboard_reading",
      "display_name": "Reading Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of connections currently reading client request headers, reflecting the state of request reception",
      "query": "apache_scboard_reading{__$labels__}"
    },
    {
      "metric_group": "State",
      "name": "apache_scboard_sending",
      "display_name": "Sending Connections",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of connections currently sending responses to clients, reflecting the state of response delivery",
      "query": "apache_scboard_sending{__$labels__}"
    },
    {
      "metric_group": "State",
      "name": "apache_scboard_open_rate",
      "display_name": "Connection Open Rate Change",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "cps",
      "dimensions": [],
      "description": "Rate of change in connection openings per second calculated over a 5-minute window, indicating connection establishment trends",
      "query": "rate(apache_scboard_open{__$labels__}[5m])"
    },
    {
      "metric_group": "Cache",
      "name": "apache_CacheCurrentEntries",
      "display_name": "Cache Current Entries",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of cache entries currently stored, indicating cache usage and memory occupancy",
      "query": "apache_CacheCurrentEntries{__$labels__}"
    },
    {
      "metric_group": "Cache",
      "name": "apache_CacheRetrieveHitCount",
      "display_name": "Cache Retrieve Hit Count",
      "instance_id_keys": ["instance_id"],
      "data_type": "Number",
      "unit": "counts",
      "dimensions": [],
      "description": "Number of successful cache retrievals; high hit rate indicates efficient caching and reduced backend load",
      "query": "apache_CacheRetrieveHitCount{__$labels__}"
    }
  ]
}