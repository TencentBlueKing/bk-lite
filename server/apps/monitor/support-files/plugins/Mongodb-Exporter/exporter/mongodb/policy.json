{
  "object": "MongoDB",
  "plugin": "MongoDB-Exporter",
  "templates": [
    {
      "name": "实例存活状态",
      "alert_name": "MongoDB 实例 ${metric_instance} 宕机",
      "description": "监测MongoDB进程存活状态，实例宕机将导致服务完全不可用。需立即检查进程崩溃原因或主机资源情况。",
      "metric_name": "mongodb_up",
      "algorithm": "last_over_time",
      "threshold": [
        {
          "level": "critical",
          "value": 0,
          "method": "<="
        }
      ]
    },
    {
      "name": "全局锁争用",
      "alert_name": "MongoDB 实例 ${metric_instance} 锁等待",
      "description": "检测全局锁活动客户端数，高并发锁等待会导致性能骤降。需优化慢查询或考虑分片扩展。",
      "metric_name": "mongodb_ss_globalLock_activeClients_total",
      "algorithm": "max",
      "threshold": [
        {
          "level": "critical",
          "value": 500,
          "method": ">="
        },
        {
          "level": "error",
          "value": 300,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 100,
          "method": ">="
        }
      ]
    },
    {
      "name": "副本集心跳异常",
      "alert_name": "MongoDB 副本集 ${metric_replset} 心跳失败",
      "description": "监控副本集心跳失败次数，频繁失败可能导致主从切换。需检查网络连通性和节点负载。",
      "metric_name": "mongodb_ss_metrics_commands_replSetHeartbeat_failed",
      "algorithm": "max",
      "threshold": [
        {
          "level": "critical",
          "value": 5,
          "method": ">="
        },
        {
          "level": "error",
          "value": 3,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 1,
          "method": ">="
        }
      ]
    }
  ]
}