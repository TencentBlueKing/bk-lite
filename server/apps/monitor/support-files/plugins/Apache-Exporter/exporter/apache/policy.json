{
  "object": "Apache",
  "plugin": "Apache-Exporter",
  "templates": [
    {
      "name": "服务存活状态",
      "alert_name": "Apache实例 ${metric_instance_id} 服务中断",
      "description": "监测Apache HTTP服务基础可用性，服务中断将导致所有请求失败。需检查systemd状态和错误日志。",
      "metric_name": "apache_up",
      "algorithm": "last_over_time",
      "threshold": [
        {
          "level": "critical",
          "value": 1,
          "method": "!="
        }
      ]
    },
    {
      "name": "工作进程异常",
      "alert_name": "Apache实例 ${metric_instance_id} 进程崩溃",
      "description": "监控服务持续运行时间，异常重启可能表明配置错误或资源耗尽。",
      "metric_name": "apache_uptime_seconds_total",
      "algorithm": "last_over_time",
      "threshold": [
        {
          "level": "critical",
          "value": 60,
          "method": "<="
        }
      ]
    },
    {
      "name": "请求处理延迟",
      "alert_name": "Apache实例 ${metric_instance_id} 响应超时",
      "description": "监控请求处理时间，延迟过高会影响用户体验。需检查慢请求日志。",
      "metric_name": "apache_duration_ms_total",
      "algorithm": "avg",
      "threshold": [
        {
          "level": "critical",
          "value": 500,
          "method": ">="
        },
        {
          "level": "error",
          "value": 300,
          "method": ">="
        },
        {
          "level": "warning",
          "value": 100,
          "method": ">="
        }
      ]
    }
  ]
}